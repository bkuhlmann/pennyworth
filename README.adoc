:toc: macro
:toclevels: 5
:figure-caption!:

= Pennyworth

[link=http://badge.fury.io/rb/pennyworth]
image::https://badge.fury.io/rb/pennyworth.svg[Gem Version]
[link=https://www.alchemists.io/projects/code_quality]
image::https://img.shields.io/badge/code_style-alchemists-brightgreen.svg[Alchemists Style Guide]
[link=https://circleci.com/gh/bkuhlmann/pennyworth]
image::https://circleci.com/gh/bkuhlmann/pennyworth.svg?style=svg[Circle CI Status]

A command line interface that augments link:https://www.alfredapp.com[Alfred] workflows.



toc::[]

== Features

* Adds Ruby support to link:https://www.alfredapp.com[Alfred].
* Supports building advanced link:https://www.alfredapp.com/help/workflows[Workflows] for personal
  augmentation.

== Screencasts

video::https://www.alchemists.io/videos/projects/pennyworth/demo.mp4[width=1062,height=1194,role=focal_point]

== Requirements

. link:https://www.apple.com/macos[macOS]
. link:https://www.gnu.org/software/bash[Bash]
. link:https://www.alfredapp.com[Alfred]
. link:https://www.alfredapp.com/purchase[Alfred Powerpack]
. link:https://github.com/postmodern/chruby[chruby]
. link:https://www.ruby-lang.org[Ruby]

== Setup

To install, run:

[source,bash]
----
gem install pennyworth
----

When using the `--git_hub` CLI option, you'll want to supply your GitHub login and
link:https://github.com/settings/tokens[Personal Access Token] with at least _read_ access via the
following environment variables:

[source,bash]
----
GITHUB_API_LOGIN=
GITHUB_API_TOKEN=
----

You can configure these environment variables via link:https://direnv.net[direnv] if using the CLI
or through the link:https://www.alfredapp.com/help/workflows/advanced/variables/#environment[Alfred
Workflow Environment].

‚ö†Ô∏è When using Alfred Workflow environment variables, please ensure you check the _Don't Export_
option for these variables so you don't expose your credentials when exporting/sharing workflows
with others.

== Usage

=== Command Line Interface (CLI)

From the command line, type `pennyworth` to view usage:

....
USAGE:
  -c, --config ACTION                      Manage gem configuration. Actions: edit || view.
      --encodings                          Render Alfred encodings script filter.
      --git_hub                            Render Alfred GitHub repositories script filter.
  -h, --help                               Show this message.
      --http_statuses                      Render Alfred HTTP statuses script filter.
      --ruby_gems                          Render Alfred RubyGems script filter.
      --system_errors                      Render Alfred system errors script filter.
      --system_signals                     Render Alfred system signals script filter.
      --text CONTENT                       Render Alfred text script filter.
  -v, --version                            Show gem version.

GITHUB OPTIONS:
      --organization [HANDLE]              Set organization. Default: "".
      --user [HANDLE]                      Set user. Default: "".

RUBYGEMS OPTIONS:
      --owner [HANDLE]                     Set owner. Default: "".
....

The following demonstrates how to use Pennyworth from the CLI or within an Alfred Script Filter:

[source,bash]
----
pennyworth --config edit
pennyworth --config view

pennyworth --encodings

pennyworth --git_hub --organization alchemists
pennyworth --git_hub --user bkuhlmann

pennyworth --http_statuses
pennyworth --ruby_gems --owner bkuhlmann
pennyworth --system_errors
pennyworth --system_signals

pennyworth --text demo
pennyworth --text "An Example"
----

While the command line options are nice, the real power comes from using Pennyworth in conjunction
with link:https://www.alfredapp.com/help/workflows/inputs/script-filter/json[Alfred Script Filters].
Without having Alfred wired up to consume the CLI output, you'll only get a JSON in your console. To
explain better, continue reading or skip ahead to the _Workflows_ section.

=== Customization

This gem can be configured via a global configuration:

....
~/.config/pennyworth/configuration.yml
....

It can also be configured via link:https://www.alchemists.io/projects/xdg[XDG] environment
variables.

The default configuration is as follows:

[source,yaml]
----
:alfred:
  :preferences:
:inflections:
  - "Bkuhlmann": "bkuhlmann"
  - "Dry Auto Inject": "Dry AutoInject"
  - "Dry Cli": "Dry CLI"
  - "Flacsmith": "FLACsmith"
  - "Git Plus": "Git+"
  - "Mac Os Config": "macOS Configuration"
  - "Mac Os": "MacOS"
  - "Prawn Plus": "Prawn+"
  - "Rubocop Ast": "Rubocop AST"
  - "Rubocop Md": "Rubocop Markdown"
  - "Rubocop Rspec": "Rubocop RSpec"
  - "Xdg": "XDG"
:git_hub:
  :api_url: "https://api.github.com"
  :organization:
  :user:
:http:
  :statuses:
    :url: "https://httpstatuses.com"
:ruby_gems:
  :api_url: "https://rubygems.org/api/v1"
  :owner:
----

Feel free to take this default configuration, modify, and save as your own custom
`configuration.yml`.

=== Themes

image:https://www.alchemists.io/images/projects/pennyworth/screenshots/alfred/alchemists-theme.png[Alchemists Theme,width=634,height=121,role=focal_point]

The above is shared as an link:https://www.alfredapp.com/extras/theme/ZQHTekMPm4[Alfred Theme] which
can be
link:alfred://theme/?t=eyJhbGZyZWR0aGVtZSI6eyJyZXN1bHQiOnsidGV4dFNwYWNpbmciOjYsInN1YnRleHQiOnsic2l6ZSI6MTEsImNvbG9yU2VsZWN0ZWQiOiIjRTZFNkU2RkYiLCJmb250IjoiSGVsdmV0aWNhIiwiY29sb3IiOiIjRTFERURFRkYifSwic2hvcnRjdXQiOnsic2l6ZSI6MTYsImNvbG9yU2VsZWN0ZWQiOiIjRkZGRkZGRkYiLCJmb250IjoiSGVsdmV0aWNhIiwiY29sb3IiOiIjMEEwQTBBRkYifSwiYmFja2dyb3VuZFNlbGVjdGVkIjoiI0EwMjYxOEZGIiwidGV4dCI6eyJzaXplIjoxNiwiY29sb3JTZWxlY3RlZCI6IiNGRkZGRkZGRiIsImZvbnQiOiJIZWx2ZXRpY2EiLCJjb2xvciI6IiNFMURFREVGRiJ9LCJpY29uUGFkZGluZ0hvcml6b250YWwiOjUsInJvdW5kbmVzcyI6MCwicGFkZGluZ1ZlcnRpY2FsIjo2LCJpY29uU2l6ZSI6NDB9LCJzZWFyY2giOnsiYmFja2dyb3VuZFNlbGVjdGVkIjoiI0IyRDdGRkZGIiwicGFkZGluZ0hvcml6b250YWwiOjgsInNwYWNpbmciOjEwLCJ0ZXh0Ijp7InNpemUiOjM2LCJjb2xvclNlbGVjdGVkIjoiIzAwMDAwMEZGIiwiZm9udCI6IkhlbHZldGljYSIsImNvbG9yIjoiI0ZGRkZGRkZGIn0sImJhY2tncm91bmQiOiIjMTIxMjEyRkYiLCJyb3VuZG5lc3MiOjAsInBhZGRpbmdWZXJ0aWNhbCI6Mn0sIndpbmRvdyI6eyJjb2xvciI6IiM3MDBBMDBGRiIsInBhZGRpbmdIb3Jpem9udGFsIjoxMCwid2lkdGgiOjYyMCwiYm9yZGVyUGFkZGluZyI6MTAsImJvcmRlckNvbG9yIjoiIzAwMDAwMDNGIiwiYmx1ciI6MCwicm91bmRuZXNzIjoxMiwicGFkZGluZ1ZlcnRpY2FsIjoxMH0sImNyZWRpdCI6IkJyb29rZSBLdWhsbWFubiIsInNlcGFyYXRvciI6eyJjb2xvciI6IiMwMDAwMDA2NiIsInRoaWNrbmVzcyI6MX0sInNjcm9sbGJhciI6eyJjb2xvciI6IiMwMDAwMDA2NiIsInRoaWNrbmVzcyI6Mn0sIm5hbWUiOiJBbGNoZW1pc3RzIn19[installed
and opened directly in Alfred].

=== Workflows

Not all workflows require Pennyworth to run properly. For the workflows that _do_ require Pennyworth
support, the following assumptions are made:

1. Your link:https://www.alchemists.io/projects/dotfiles[Dotfiles] are configured to use
   link:https://www.gnu.org/software/bash[Bash] and load your environment appropriately. Bash is not
   a hard requirement, though. You can use _any shell_ you are comfortable with as long as you teach
   Alfred to load your development environment before running the Alfred Workflow.
1. You have the latest version of Alfred, Ruby, and Pennyworth installed.
1. You are using a Ruby version manager, like link:https://github.com/postmodern/chruby[chruby],
   which ensure Ruby and your gem environment, where Pennyworth is installed, is properly loaded.

With the above requirements in mind, you should only need to build an Alfred Script Filter that
looks something like this:

image:https://www.alchemists.io/images/projects/pennyworth/screenshots/alfred/script_filter.png[Script Filter,width=776,height=635,role=focal_point]

That's all it takes to use Pennyworth as an Alfred script filter. üéâ You don't have to do any of this
work yourself. I've already built the corresponding workflows. The following sections will allow you
to download and use the corresponding Alfred Workflows that are powered by Pennyworth.

Before diving into each workflow, the following capabilities are mostly available to all workflows
depending on what kind of item is selected in the script filter:

* `SHIFT` or `COMMAND + y` will launch
  link:https://www.alfredapp.com/help/features/previews[Quicklook] for any URL based workflow.
* `ENTER` or `COMMAND + c` will copy selections to clipboard (depends on context, though).
* `COMMAND + l` will launch link:https://www.alfredapp.com/help/features/large-type[Large Type] of
  current selection.
* `ENTER` Will either copy selection to clipboard or launch URL in default web browser.

==== Alchemists

The official Alchemists workflow for site navigation.

image:https://www.alchemists.io/images/projects/pennyworth/screenshots/alfred/alchemists-projects.png[Alchemists Projects,width=706,height=622,role=focal_point]

1. link:https://www.alchemists.io/public/aflred/workflows/alchemists.alfredworkflow[Download] (right
   click to save).
1. Type `ax` to activate.

üí° Use `ENTER` to view site, `CONTROL` to view changes, `OPTION` to view source, or `COMMAND` to
view issues.

==== Dry RB

A link:https://dry-rb.org[Dry RB] workflow for navigating all of the Dry RB site.

image:https://www.alchemists.io/images/projects/pennyworth/screenshots/alfred/dry-gems.png[Dry Gems,width=706,height=622,role=focal_point]

1. link:https://www.alchemists.io/public/aflred/workflows/dry.alfredworkflow[Download] (right click
   to save).
1. Type `dry` to activate.

üí° Use `ENTER` to visit site, `CONTROL` to view changes, `OPTION` to view source, or `COMMAND` to
view issues.

==== Encodings

A Ruby encodings workflow for quickly searching for various encodings and/or their associated
aliases to use in your own code.

image:https://www.alchemists.io/images/projects/pennyworth/screenshots/alfred/encodings.png[Encodings,width=706,height=622,role=focal_point]

1. link:https://www.alchemists.io/public/aflred/workflows/ruby.alfredworkflow[Download] (right click
   to save).
1. Type `encodings` to activate.

üí° Use `ENTER` to copy label or `OPTION` to copy aliases to clipboard.

==== HTTP Statuses

A HTTP statuses workflow for looking up statuses by code with quick access to the associated symbol
for use in your own code. Includes associated documentation for sharing or learning more.

image:https://www.alchemists.io/images/projects/pennyworth/screenshots/alfred/http_statuses.png[HTTP Statuses,width=706,height=622,role=focal_point]

1. link:https://www.alchemists.io/public/aflred/workflows/ruby.alfredworkflow[Download] (right click
   to save).
1. Type `https` to activate.

üí° Use `ENTER` to copy symbol, `CONTROL` to copy code, `OPTION` to copy label, or `COMMAND` to view
documentation.

==== Rubocop

A link:https://docs.rubocop.org/rubocop[Rubocop] workflow for quick access to documentation,
learning about project changes, viewing source code, etc.

image:https://www.alchemists.io/images/projects/pennyworth/screenshots/alfred/rubocop-projects.png[Rubocop Projects,width=706,height=622,role=focal_point]

1. link:https://www.alchemists.io/public/aflred/workflows/rubocop.alfredworkflow[Download] (right
   click to save).
1. Type `cop` to activate.

üí° Use `ENTER` to view site, `CONTROL` to view changes, `OPTION` to view source, or `COMMAND` to
view issues.

==== System Errors

A workflow for dynamically looking up low-level system errors. Depending on which operating system
you are on, these errors can differ. Error IDs are provided for fuzzy searching since they are most
likely what you'll see in your stack dumps. The associated constant can be copied to clipboard for
use in your Ruby code.

image:https://www.alchemists.io/images/projects/pennyworth/screenshots/alfred/system_errors.png[System Errors,width=706,height=622,role=focal_point]

1. link:https://www.alchemists.io/public/aflred/workflows/ruby.alfredworkflow[Download] (right click
   to save).
1. Type `syserr` to activate.

üí° Use `ENTER` to copy constant, `CONTROL` to copy ID, `OPTION` to copy description, or `COMMAND` to
copy ID, name, and description.

==== System Signals

A workflow for searching and acquiring the system signal you want to `trap` in your own Ruby code.

image:https://www.alchemists.io/images/projects/pennyworth/screenshots/alfred/system_signals.png[System Signals,width=706,height=622,role=focal_point]

1. link:https://www.alchemists.io/public/aflred/workflows/ruby.alfredworkflow[Download] (right
   click to save).
1. Type `signals` to activate.

üí° Use `ENTER` to copy name, `OPTION` to copy ID, or `COMMAND` to copy ID and name.

==== Text

A workflow for text manipulation. Supply a string, phrase, or sentence and let Pennyworth calculate
all transformations and information for you to copy to clipboard and use further.

image:https://www.alchemists.io/images/projects/pennyworth/screenshots/alfred/text.png[Text,width=706,height=622,role=focal_point]

1. link:https://www.alchemists.io/public/aflred/workflows/ruby.alfredworkflow[Download] (right
   click to save).
1. Type `text` plus your text to transform to activate.

üí° Use `ENTER` to copy text to clipboard.

==== Other

The following workflows don't require Pennyworth support but are provided for convenience in case
they are of interest/aid to your own productivity. Right click to download, save, and install for
your own use:

* link:https://www.alchemists.io/public/aflred/worfklows/acronyms.alfredworkflow[Acronyms] -
  Expands acronyms into full explanations so you can think and type in terms of an acronym but
  appear as if you typed out the full definition each time.
* link:https://www.alchemists.io/public/aflred/worfklows/applications.alfredworkflow[Applications] -
  Launches development environment but can be tweaked for your preferences. Using Alfred in this
  manner ensures your machine boots or restarts quickly and gives you more control over what is
  launched.
* link:https://www.alchemists.io/public/aflred/worfklows/browsers.alfredworkflow[Browsers] -
  Provides browser related utilities.
* link:https://www.alchemists.io/public/aflred/worfklows/hanami.alfredworkflow[Hanami] - Provides
  Hanami related resources.
* link:https://www.alchemists.io/public/aflred/worfklows/chlli.alfredworkflow[chi.li] - Shortens
  URLs for you.
* link:https://www.alchemists.io/public/aflred/worfklows/docker.alfredworkflow[Docker] - Provides
  quick access to Docker related information.
* link:https://www.alchemists.io/public/aflred/worfklows/mac_os.alfredworkflow[macOS] - Provides macOS utilities.
* link:https://www.alchemists.io/public/aflred/worfklows/terraform.alfredworkflow[Terraform] -
  Provides quick access to Terraform related information.
* link:https://www.alchemists.io/public/aflred/worfklows/text.alfredworkflow[Text] - Provides
  additional and general text manipulation utilities beyond the _Text Workflow_ powered by
  Pennyworth (mentioned earlier).

== Troubleshooting

* link:https://github.com/ruby/psych[Psych] 4.0.0 has a
  link:https://github.com/ruby/psych/issues/490[bug] which prevents loading of YAML configurations
  that use symbols as keys. If you get caught by this, uninstall Psych 4.0.0 and fall back to 3.x.x
  instead.
* When your Alfred Workflow yields no output, you might want to open the
  link:https://www.alfredapp.com/help/workflows/utilities/debug[Alfred Debugger], rerun your
  workflow, and check for errors. You can also jump to the CLI and run Pennyworth directly.
* If you get GitHub authorization errors, make sure you have defined the appropriate credentials
  (mentioned earlier) for both within your shell where you are running Pennyworth or within the
  Alfred Workflow environment variables.

== Development

To contribute, run:

[source,bash]
----
git clone https://github.com/bkuhlmann/pennyworth.git
cd pennyworth
bin/setup
----

You can also use the IRB console for direct access to all objects:

[source,bash]
----
bin/console
----

== Tests

To test, run:

[source,bash]
----
bundle exec rake
----

== Versioning

Read link:https://semver.org[Semantic Versioning] for details. Briefly, it means:

* Major (X.y.z) - Incremented for any backwards incompatible public API changes.
* Minor (x.Y.z) - Incremented for new, backwards compatible, public API enhancements/fixes.
* Patch (x.y.Z) - Incremented for small, backwards compatible, bug fixes.

== Code of Conduct

Please note that this project is released with a link:CODE_OF_CONDUCT.adoc[CODE OF CONDUCT]. By
participating in this project you agree to abide by its terms.

== Contributions

Read link:CONTRIBUTING.adoc[CONTRIBUTING] for details.

== License

Read link:LICENSE.adoc[LICENSE] for details.

== History

Read link:CHANGES.adoc[CHANGES] for details.

== Credits

Engineered by link:https://www.alchemists.io/team/brooke_kuhlmann[Brooke Kuhlmann].
